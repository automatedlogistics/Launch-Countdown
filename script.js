function launch(){launchFrom(Math.random()*SCREEN_WIDTH*2/3+SCREEN_WIDTH/6)}function launchFrom(a){if(rockets.length<10){var b=new Rocket(a);b.explosionColor=10*Math.floor(360*Math.random()/10),b.vel.y=-3*Math.random()-4,b.vel.x=6*Math.random()-3,b.size=8,b.shrink=.999,b.gravity=.01,rockets.push(b)}}function loop(){SCREEN_WIDTH!=window.innerWidth&&(canvas.width=SCREEN_WIDTH=window.innerWidth),SCREEN_HEIGHT!=window.innerHeight&&(canvas.height=SCREEN_HEIGHT=window.innerHeight),context.globalCompositeOperation="destination-out",context.fillStyle="rgba(0, 0, 0, 0.1)",context.fillRect(0,0,SCREEN_WIDTH,SCREEN_HEIGHT);for(var a=[],b=0;b<rockets.length;b++){rockets[b].update(),rockets[b].render(context);var c=Math.sqrt(Math.pow(mousePos.x-rockets[b].pos.x,2)+Math.pow(mousePos.y-rockets[b].pos.y,2)),d=rockets[b].pos.y<2*SCREEN_HEIGHT/3?100*Math.random()<=1:!1;rockets[b].pos.y<SCREEN_HEIGHT/5||rockets[b].vel.y>=0||50>c||d?rockets[b].explode():a.push(rockets[b])}rockets=a;for(var e=[],b=0;b<particles.length;b++)particles[b].update(),particles[b].exists()&&(particles[b].render(context),e.push(particles[b]));for(particles=e;particles.length>MAX_PARTICLES;)particles.shift()}function Particle(a){this.pos={x:a?a.x:0,y:a?a.y:0},this.vel={x:0,y:0},this.shrink=.97,this.size=2,this.resistance=1,this.gravity=0,this.flick=!1,this.alpha=1,this.fade=0,this.color=0}function Rocket(a){Particle.apply(this,[{x:a,y:SCREEN_HEIGHT}]),this.explosionColor=0}var Konami=function(a){var b={addEvent:function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&(a["e"+b+c]=c,a[b+c]=function(){a["e"+b+c](window.event,d)},a.attachEvent("on"+b,a[b+c]))},input:"",pattern:"38384040373937396665",load:function(a){this.addEvent(document,"keydown",function(c,d){return d&&(b=d),b.input+=c?c.keyCode:event.keyCode,b.input.length>b.pattern.length&&(b.input=b.input.substr(b.input.length-b.pattern.length)),b.input==b.pattern?(b.code(a),b.input="",c.preventDefault(),!1):void 0},this),this.iphone.load(a)},code:function(a){window.location=a},iphone:{start_x:0,start_y:0,stop_x:0,stop_y:0,tap:!1,capture:!1,orig_keys:"",keys:["UP","UP","DOWN","DOWN","LEFT","RIGHT","LEFT","RIGHT","TAP","TAP"],code:function(a){b.code(a)},load:function(a){this.orig_keys=this.keys,b.addEvent(document,"touchmove",function(a){if(1==a.touches.length&&1==b.iphone.capture){var c=a.touches[0];b.iphone.stop_x=c.pageX,b.iphone.stop_y=c.pageY,b.iphone.tap=!1,b.iphone.capture=!1,b.iphone.check_direction()}}),b.addEvent(document,"touchend",function(c){1==b.iphone.tap&&b.iphone.check_direction(a)},!1),b.addEvent(document,"touchstart",function(a){b.iphone.start_x=a.changedTouches[0].pageX,b.iphone.start_y=a.changedTouches[0].pageY,b.iphone.tap=!0,b.iphone.capture=!0})},check_direction:function(a){x_magnitude=Math.abs(this.start_x-this.stop_x),y_magnitude=Math.abs(this.start_y-this.stop_y),x=this.start_x-this.stop_x<0?"RIGHT":"LEFT",y=this.start_y-this.stop_y<0?"DOWN":"UP",result=x_magnitude>y_magnitude?x:y,result=1==this.tap?"TAP":result,result==this.keys[0]&&(this.keys=this.keys.slice(1,this.keys.length)),0==this.keys.length&&(this.keys=this.orig_keys,this.code(a))}}};return"string"==typeof a&&b.load(a),"function"==typeof a&&(b.code=a,b.load()),b};Particle.prototype.update=function(){this.vel.x*=this.resistance,this.vel.y*=this.resistance,this.vel.y+=this.gravity,this.pos.x+=this.vel.x,this.pos.y+=this.vel.y,this.size*=this.shrink,this.alpha-=this.fade},Particle.prototype.render=function(a){if(this.exists()){a.save(),a.globalCompositeOperation="lighter";var b=this.pos.x,c=this.pos.y,d=this.size/2,e=a.createRadialGradient(b,c,.1,b,c,d);e.addColorStop(.1,"rgba(255,255,255,"+this.alpha+")"),e.addColorStop(.8,"hsla("+this.color+", 100%, 50%, "+this.alpha+")"),e.addColorStop(1,"hsla("+this.color+", 100%, 50%, 0.1)"),a.fillStyle=e,a.beginPath(),a.arc(this.pos.x,this.pos.y,this.flick?Math.random()*this.size:this.size,0,2*Math.PI,!0),a.closePath(),a.fill(),a.restore()}},Particle.prototype.exists=function(){return this.alpha>=.1&&this.size>=1},Rocket.prototype=new Particle,Rocket.prototype.constructor=Rocket,Rocket.prototype.explode=function(){for(var a=10*Math.random()+80,b=0;a>b;b++){var c=new Particle(this.pos),d=Math.random()*Math.PI*2,e=15*Math.cos(Math.random()*Math.PI/2);c.vel.x=Math.cos(d)*e,c.vel.y=Math.sin(d)*e,c.size=10,c.gravity=.2,c.resistance=.92,c.shrink=.05*Math.random()+.93,c.flick=!0,c.color=this.explosionColor,particles.push(c)}},Rocket.prototype.render=function(a){if(this.exists()){a.save(),a.globalCompositeOperation="lighter";var b=this.pos.x,c=this.pos.y,d=this.size/2,e=a.createRadialGradient(b,c,.1,b,c,d);e.addColorStop(.1,"rgba(255, 255, 255 ,"+this.alpha+")"),e.addColorStop(1,"hsla("+this.explosionColor+", 100%, 50%, 0.1)"),a.fillStyle=e,a.beginPath(),a.arc(this.pos.x,this.pos.y,this.flick?Math.random()*this.size/2+this.size/2:this.size,0,2*Math.PI,!0),a.closePath(),a.fill(),a.restore()}};var launchFireworks=!1,SCREEN_WIDTH=window.innerWidth,SCREEN_HEIGHT=window.innerHeight,mousePos={x:400,y:300},canvas=document.createElement("canvas"),context=canvas.getContext("2d"),particles=[],rockets=[],MAX_PARTICLES=400,colorCode=0;canvas.setAttribute("id","fireworks-display"),document.body.appendChild(canvas);var fireworksLoad=function(){launchFireworks=!0,canvas.width=SCREEN_WIDTH,canvas.height=SCREEN_HEIGHT,setInterval(launch,800),setInterval(loop,20)},fireworksEasterEgg=new Konami;fireworksEasterEgg.code=fireworksLoad,fireworksEasterEgg.load(),jQuery(function(a){a(document).mousemove(function(a){launchFireworks&&(a.preventDefault(),mousePos={x:a.clientX,y:a.clientY})}),a(document).mousedown(function(a){if(launchFireworks)for(var b=0;5>b;b++)launchFrom(Math.random()*SCREEN_WIDTH*2/3+SCREEN_WIDTH/6)})});
//# sourceMappingURL=script.js.map